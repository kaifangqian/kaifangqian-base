<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kaifangqian.modules.form.mapper.OnlFormTableMapper">

    <select id="pageExt" resultType="com.kaifangqian.modules.form.entity.OnlFormTable">
        SELECT f.id,
        t.app_info_id,
        t.table_name,
        t.table_version,
        p.`name` AS table_txt,
        p.component
        FROM onl_form_table t
        LEFT JOIN onl_table_form f
        ON t.id = f.table_id
        LEFT JOIN sys_permission p ON f.sys_permission_id = p.id
        WHERE
        p.component IS NOT NULL
        <if test="formName!=null and formName!=''">
            and p.`name` like concat(concat('%',#{formName}),'%')
        </if>
    </select>

</mapper>