<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kaifangqian.modules.system.mapper.SysAnnouncementMapper">

    <select id="pageExt" resultType="com.kaifangqian.modules.system.entity.SysAnnouncement">
        SELECT
        sa.*,
        sat.type_name
        FROM
        sys_announcement sa
        LEFT JOIN sys_announcement_type sat ON sa.announcement_type = sat.id
        WHERE
        sa.delete_flag = 0
        <if test="sysAnnouncement.announcementType!=null and sysAnnouncement.announcementType!=''">
            AND sa.announcement_type = #{sysAnnouncement.announcementType}
        </if>
        <if test="sysAnnouncement.title!=null and sysAnnouncement.title!=''">
            AND sa.title LIKE concat(concat('%',#{sysAnnouncement.title}),'%')
        </if>
        <if test="sysAnnouncement.sendStatus!=null and sysAnnouncement.sendStatus!=''">
            AND sa.send_status = #{sysAnnouncement.sendStatus}
        </if>
        ORDER BY
        sa.create_time DESC
    </select>

</mapper>